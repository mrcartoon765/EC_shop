<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
{# jquery読み込み #}
<script src="{{constant('member\\Bootstrap::APP_URL')}}js/common.js"></script>
{# constant　定数を呼び出す　twigの関数 bootstrapのAPP_URLを読み込む　bootstrap.class.php22行目　#}
<link href="{{constant('member\\Bootstrap::APP_URL')}}css/style.css" rel="stylesheet">
<title>会員登録</title>
</head>
<body>
<input type="hidden" name="entry_url" id="entry_url" value="{{constant('member\\Bootstrap::ENTRY_URL')}}">
{# valueにbootstrap.class.php 23行目を取得 画面には非表示 #}
<form method="post" action="confirm.php">
{# postが来たらconfirm.phpへ移動 #}
<table>
<tr>
<th>ユーザーID<span class="red">*</span></th>
{# *は赤文字で必須ポイント #}
<td>
<input type="text" name="user_id" value="{{dataArr.user_id}}">
{% if errArr.user_id | length > 0 %}<br><span class="red">{{ errArr.user_id }}</span>{% endif %}
</td>
</tr>
<tr>
<th>パスワード<span class="red">*</span></th>
{# *は赤文字で必須ポイント #}
<td>
<input type="text" name="user_pass" value="{{dataArr.user_pass}}">
{% if errArr.user_pass | length > 0 %}<br><span class="red">{{ errArr.user_pass }}</span>{% endif %}
</td>
</tr>
<tr>
<th>お名前(氏名)<span class="red">*</span></th>
{# *は赤文字で必須ポイント #}
<td>
<input type="text" name="family_name" value="{{dataArr.family_name}}">
{# テキストボックスの作成 　dataarr.family_name は　空　#}
<input type="text" name="first_name"  value="{{dataArr.first_name}}">
{# テキストボックスの作成 　dataarr.first_name は　空　#}
{% if errArr.family_name | length > 0 %}<br><span class="red">{{ errArr.family_name }}</span>{% endif %}
{# もしerrarrfamilynameに値が入っている場合　errarr.family_nameを表示する　 #}
{% if errArr.first_name | length > 0 %}<br><span class="red">{{ errArr.first_name }}</span>{% endif %}
{# もしerrarrfamilynameに値が入っている場合　errarr.first_nameを表示する　 #}
</td>
</tr>
<tr>
<th>お名前(かな)</th>
<td>
<input type="text" name="family_name_kana" value="{{dataArr.family_name_kana}}">
<input type="text" name="first_name_kana"  value="{{dataArr.first_name_kana}}">
</td>
</tr>
<tr>
<th>性別<span class="red">*</span></th>
<td>
{% for index, label in sexArr %}
{# 2かいループ    phpと逆　　 #}
{# <?php foreach($sexarr) as $index => $label) #}
  <input type="radio" name="sex" value="{{index}}" id="sex_{{index}}" {% if dataArr.sex == index %} checked="checked" {% endif %}>
  {# もし　indexの値があるのであれば　cheked= chekcedの値をつける
    if文で入っている意味は foreach で　画面遷移して戻ったりすると　消えてしまうので、　値を保持する為に必要
  #}
<label for="sex_{{index}}">{{label}}</label>
{# label idの部分と連動できるようにしている#}
{% endfor %}
{# チェックボックスを2つ作っている #}
{% if errArr.sex | length > 0 %}<br><span class="red">{{errArr.sex}}</span>{% endif %}
{# もし値があったらエラーを表示する #}
</td>
</tr>
<tr>
<th>生年月日<span class="red">*</span></th>
<td>
<select name="year" >
{% for index, label in yearArr %}
{# initmaster.class,php 21 の部分を1900から2021までを
for文でまとめて作って表示している #}
<option value="{{index}}" {% if dataArr.year == index %} selected {% endif %}>{{ label }}</option>
{# selectで選択された状態にして他のページから戻ってきたときも状態を保持する為 #}
{% endfor %}
</select>
<select name='month'>
{% for index, label in monthArr %}
<option value="{{index}}" {% if dataArr.month == index %} selected {% endif %}>{{ label }}</option>
{% endfor %}
{# initmaster.class,php 31 の部分を1から12までを
for文でまとめて作って表示している #}
</select>
<select name='day'>
{% for index, label in dayArr %}
<option value="{{index}}" {% if dataArr.day == index %} selected {% endif %}>{{ label }}</option>
{% endfor %}
{# initmaster.class,php 37 の部分を1から31までを
for文でまとめて作って表示している #}
</select>
{% if errArr.year | length > 0 %}<br><span class="red">{{errArr.year}}</span>{% endif %}
{# エラーがあれば表示する #}
{% if errArr.month | length > 0 %}<br><span class="red">{{errArr.month}}</span>{% endif %}
{# エラーがあれば表示する #}
{% if errArr.day | length > 0 %}<br><span class="red">{{errArr.day}}</span>{% endif %}
{# エラーがあれば表示する #}
</td>
</tr>
<tr>
<th>郵便番号<span class="red">*</span></th>
<td>
<input type="text" name="zip1" value="{{dataArr.zip1}}" id="zip1" size="3" maxlength="3"> -
{# 3文字まで入力できるようにしている #}
<input type="text" name="zip2" value="{{dataArr.zip2}}" id="zip2" size="4" maxlength="4">
{# 4文字まで入力できるようにしている #}
<input type="button" name="address_search" value="〒から住所を入力" id="address_search">
{# common.js 2行目 #}
{% if errArr.zip1 | length > 0 %}<br><span class="red">{{errArr.zip1}}</span>{% endif %}
{# エラーがあれば表示する #}
{% if errArr.zip2 | length > 0 %}<br><span class="red">{{errArr.zip2}}</span>{% endif %}
{# エラーがあれば表示する #}
</td>
</tr>
<tr>
<th>住所<span class="red">*</span></th>
<td>
<input type="text" name="address" value="{{dataArr.address}}" id="address" size="40">
{# テキストボックスの作成 　dataarr.first_name は　空　#}
{% if errArr.address | length > 0 %}<br><span class="red">{{errArr.address}}</span>{% endif %}
{# エラーがあれば表示する #}
</td>
</tr>
<tr>
<th>メールアドレス<span class="red">*</span></th>
<td>
<input type="text" name="email" value="{{dataArr.email}}" size="40">
{# テキストボックスの作成 　datArr.email は　空　#}
{% if errArr.email | length > 0 %}<br><span class="red">{{errArr.email}}</span>{% endif %}
{# エラーがあれば表示する #}
</td>
</tr>
<tr>
<th>電話番号<span class="red">*</span></th>
<td>
<input type="text" name="tel1" value="{{dataArr.tel1}}" size="6" maxlength="6"> -
{# 最大文字数6文字で入力できるようにしている #}
<input type="text" name="tel2" value="{{dataArr.tel2}}" size="6" maxlength="6"> -
{# 最大文字数6文字で入力できるようにしている #}
<input type="text" name="tel3" value="{{dataArr.tel3}}" size="6" maxlength="6">
{# 最大文字数6文字で入力できるようにしている #}
{% if errArr.tel1 | length > 0 %}<br><span class="red">{{errArr.tel1}}</span>{% endif %}
{# エラーがあれば表示する #}
{% if errArr.tel2 | length > 0 %}<br><span class="red">{{errArr.tel2}}</span>{% endif %}
{# エラーがあれば表示する #}
{% if errArr.tel3 | length > 0 %}<br><span class="red">{{errArr.tel3}}</span>{% endif %}
{# エラーがあれば表示する #}
</td>
</tr>
<tr>
<th>備考</th>
<td>
<textarea name="contents" rows="4" cols="40">{{dataArr.contents}}</textarea>
{# 幅が４０高さが４のテキストエリアを作っている #}
</td>
</tr>
</table>
<div>
<input type="submit" name="confirm" value="登録確認">
</div>
</form>
</body>
</html>